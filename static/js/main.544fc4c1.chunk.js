(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{109:function(e,t,a){e.exports=a(207)},118:function(e,t,a){},125:function(e,t){},127:function(e,t){},161:function(e,t){},162:function(e,t){},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),c=a.n(o),i=a(45),s=a(12),u=(a(118),a(5)),l=a(6),d=a(8),m=a(7),p=a(9),h=a(24),b=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{"data-testid":"settings-title"},"Configurac\xf5es"))}}]),t}(r.a.Component),f=a(48),v=a(10),g=a(46),y=a.n(g),O=a(25),E=a.n(O),j=function(e){return{type:"REMOVETEMPO",payload:e}},k=function(e){return{type:"REMOUNT_TIMER",payload:e}},S=function(e){return function(t){var a,n,r;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t({type:"CALL_API"}),o.next=3,E.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 3:return a=o.sent,o.next=6,E.a.awrap(a.json());case 6:n=o.sent,r=n.results,t({type:"GET_DATA_API",payload:r});case 9:case"end":return o.stop()}}))}},R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={gravatarEmail:"",name:""},a.setHashedEmail=a.setHashedEmail.bind(Object(v.a)(a)),a.setRank=a.setRank.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.gravatarEmail,a=e.name,n=y()(t);this.setHashedEmail(n,a)}},{key:"setHashedEmail",value:function(e,t){this.setState({gravatarEmail:e,name:t})}},{key:"setRank",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.score,a=e.name,n=this.state.gravatarEmail,r=[];console.log("Pontua\xe7\xe3o - ".concat(t)),r.push({name:a,score:t,picture:"https://www.gravatar.com/avatar/".concat(n)});var o=JSON.parse(localStorage.getItem("ranking"));console.log(o),o=[].concat(Object(f.a)(o),r),console.log(o),localStorage.setItem("ranking",JSON.stringify(o))}},{key:"feedBack",value:function(e){return e<3?"Podia ser melhor...":"Mandou bem!"}},{key:"render",value:function(){var e=this,t=this.props,a=t.total,n=t.totalQuestions,o=t.history,c=t.ajusta,i=this.state,s=i.gravatarEmail,u=i.name;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(s),alt:"seila"}),r.a.createElement("h1",{"data-testid":"header-player-name"},u),r.a.createElement("p",{"data-testid":"feedback-total-score"},a),r.a.createElement("p",{"data-testid":"header-score"},a),r.a.createElement("p",{"data-testid":"feedback-total-question"},n)),r.a.createElement("h1",{"data-testid":"feedback-text"},this.feedBack(n)),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){c(30),o.push("/")}},"Jogar Novamente"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){e.setRank(),o.push("/ranking")}},"Ranking"))}}]),t}(r.a.Component),w=Object(s.b)((function(e){return{total:e.perguntasReducer.acertos,totalQuestions:e.perguntasReducer.questions}}),(function(e){return{ajusta:function(t){return e(j(t))}}}))(R),T=a(47),C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={name:"",assertions:0,score:0,gravatarEmail:"",verifyFields:!0,shouldRedirect:!1},a.saveToLocalStore=a.saveToLocalStore.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.verify=a.verify.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.assertions,a=e.score;console.log("".concat(t," and ").concat(a))}},{key:"saveToLocalStore",value:function(){var e,t,a,n,r,o,c;return E.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.state,i.next=3,E.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return t=i.sent,i.next=6,E.a.awrap(t.json());case 6:a=i.sent,n=a.token,(r={player:e}).player.assertions=0,r.player.score=0,o=[],c=JSON.parse(localStorage.getItem("ranking")),console.log("Old Ranking: ".concat(c)),localStorage.setItem("token",n),localStorage.setItem("state",JSON.stringify(r)),c||(console.log("Cria Ranking"),localStorage.setItem("ranking",JSON.stringify(o))),this.setState({shouldRedirect:!0});case 18:case"end":return i.stop()}}),null,this)}},{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(T.a)({},t,e.target.value)),this.verify()}},{key:"verify",value:function(){var e=this.state,t=e.gravatarEmail,a=e.name;t.length>0&&a.length>0?this.setState({verifyFields:!1}):this.setState({verifyFields:!0})}},{key:"render",value:function(){var e=this.state,t=e.verifyFields;return e.shouldRedirect?r.a.createElement(h.a,{to:"/jogo"}):r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"input-player-name"},"Nome:",r.a.createElement("input",{type:"text",id:"input-player-name","data-testid":"input-player-name",name:"name",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"input-gravatar-email"},"Email:",r.a.createElement("input",{type:"text","data-testid":"input-gravatar-email",id:"input-gravatar-email",name:"gravatarEmail",onChange:this.handleChange})),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:t,onClick:this.saveToLocalStore},"Jogar"))}}]),t}(r.a.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",null,r.a.createElement(C,{props:this.props}),r.a.createElement("button",{type:"button",onClick:function(){return e.push("/config")},"data-testid":"btn-settings"},"Configura\xe7\xf5es"))}}]),t}(r.a.Component),I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={gravatarEmail:"",name:""},a.setHashedEmail=a.setHashedEmail.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.gravatarEmail,a=e.name,n=y()(t);this.setHashedEmail(n,a)}},{key:"setHashedEmail",value:function(e,t){this.setState({gravatarEmail:e,name:t})}},{key:"render",value:function(){var e=this.state,t=e.gravatarEmail,a=e.name,n=this.props.total;return r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(t),alt:"seila"}),r.a.createElement("h1",{"data-testid":"header-player-name"},a),r.a.createElement("p",{"data-testid":"header-score"},n))}}]),t}(r.a.Component),P=Object(s.b)((function(e){return{total:e.perguntasReducer.acertos}}),null)(I),N=a(21),q=(a(206),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).timerFunc=e.timerFunc.bind(Object(v.a)(e)),e.state={interval:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.shouldRemount)(!1),this.timerFunc()}},{key:"timerFunc",value:function(){var e=this,t=setInterval((function(){var t=e.props,a=t.total;(0,t.ajusta)(a-1)}),1e3);this.setState({interval:t})}},{key:"render",value:function(){var e=this.state.interval,t=this.props,a=t.total,n=t.callback,o=t.remountThis,c=t.dis;return 0===a&&(clearInterval(e),n(),c(!0)),o&&clearInterval(e),r.a.createElement("div",null,r.a.createElement("h1",null,a))}}]),t}(r.a.Component)),A=Object(s.b)((function(e){return{total:e.timerReducer.timer,remountThis:e.timerReducer.shouldRemount}}),(function(e){return{ajusta:function(t){return e(j(t))},shouldRemount:function(t){return e(k(t))}}}))(q),J=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).botaoacertoPoints=e.botaoacertoPoints.bind(Object(v.a)(e)),e.botaoerradoPoints=e.botaoerradoPoints.bind(Object(v.a)(e)),e.saveToLocalStorage=e.saveToLocalStorage.bind(Object(v.a)(e)),e.nextButton=e.nextButton.bind(Object(v.a)(e)),e.mix=e.mix.bind(Object(v.a)(e)),e.disableButtons=e.disableButtons.bind(Object(v.a)(e)),e.state={indice:0,acertos:0,click:!1,green:"",red:"",answersToDisplay:[],correctAnswers:[],forceKey:0,disable:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.reqPerguntas)(localStorage.getItem("token")).then((function(){var t=e.props.perguntas[0],a=[],n=[];t.map((function(t){return a.push(e.mix([].concat(Object(f.a)(t.incorrect_answers),[t.correct_answer]))),n.push(t.correct_answer),!0})),e.setState({answersToDisplay:a,correctAnswers:n,disable:!1})}))}},{key:"disableButtons",value:function(e){e&&this.setState({disable:!0})}},{key:"botaoacertoPoints",value:function(){var e=this.props.shouldRemount,t=this.props,a=t.addAcertos,n=t.countTimer,r=this.state,o=r.click,c=r.acertos;e(!0);var i=10+n;this.saveToLocalStorage(c+i,1),o||(this.setState((function(e){return{acertos:e.acertos+i,click:!0,green:"green",red:"red"}})),a(c+i))}},{key:"botaoerradoPoints",value:function(){var e=JSON.parse(localStorage.getItem("state")).player.score;(0,this.props.shouldRemount)(!0),this.setState((function(){return{click:!0,red:"red",green:"green"}})),this.disableButtons(),this.saveToLocalStorage(e,0)}},{key:"saveToLocalStorage",value:function(e,t){var a=JSON.parse(localStorage.getItem("state")),n=a.player.assertions;n+=t,a.player=Object(N.a)({},a.player,{score:e,assertions:n}),console.log(a.player),localStorage.setItem("state",JSON.stringify(a))}},{key:"nextButton",value:function(){var e=this.state,t=e.indice,a=e.forceKey,n=this.props,r=n.history,o=n.ajusta,c=n.shouldRemount;t<4?(o(30),c(!0),this.setState((function(e){return{click:!1,indice:e.indice+1,green:"",red:"",forceKey:a+1}}))):r.history.push("/feedback")}},{key:"mix",value:function(e){return e.sort((function(){return Math.random()-.5}))}},{key:"renderBtn",value:function(){var e=this;return r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:function(){return e.nextButton()}}," ","Proximo")}},{key:"render",value:function(){var e=this,t=this.props,a=t.perguntas,n=t.countTimer,o=a[0],c=this.state,i=c.indice,s=c.click,u=c.green,l=c.red,d=c.forceKey,m=this.state,p=m.answersToDisplay,h=m.correctAnswers,b=m.disable;return r.a.createElement("div",null,r.a.createElement(A,{key:d,callback:this.botaoerradoPoints,dis:this.disableButtons}),r.a.createElement("h1",{"data-testid":"question-category"},o[i].category),r.a.createElement("p",{"data-testid":"question-text"},o[i].question),p[i]&&p[i].map((function(t,a){return t===h[i]?r.a.createElement("button",{type:"button",className:u,onClick:function(t){return e.botaoacertoPoints(t)},key:t,disabled:b,"data-testid":"correct-answer"},t):r.a.createElement("button",{type:"button",className:l,onClick:function(t){return e.botaoerradoPoints(t)},key:t,disabled:b,"data-testid":"wrong-answer".concat(a<=2?a:3)},t)})),(s||0===n)&&this.renderBtn())}}]),t}(r.a.Component),M=Object(s.b)((function(e){return{pontos:e.perguntasReducer.acertos,questions:e.perguntasReducer.questions,perguntas:e.reqApiReducer.results,countTimer:e.timerReducer.timer}}),(function(e){return{reqPerguntas:function(t){return e(S(t))},addAcertos:function(t){return e(function(e){return{type:"TOTAL",payload:e}}(t))},ajusta:function(t){return e(j(t))},shouldRemount:function(t){return e(k(t))}}}))(J),B=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.reqPerguntas)(localStorage.getItem("token"))}},{key:"render",value:function(){return this.props.perguntas[0]?r.a.createElement("div",null,r.a.createElement(P,null),r.a.createElement(M,{history:this.props})):r.a.createElement("p",null,"Carregando...")}}]),t}(r.a.Component),L=Object(s.b)((function(e){return{perguntas:e.reqApiReducer.results}}),(function(e){return{reqPerguntas:function(t){return e(S(t))}}}))(B),D=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderList",value:function(e,t){var a=e.name,n=e.score,o=e.picture;return r.a.createElement("li",{className:"rank-list"},r.a.createElement("img",{src:o,alt:a}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},a),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},n))}},{key:"render",value:function(){var e=this,t=JSON.parse(localStorage.getItem("ranking")),a=this.props,n=a.ajusta,o=a.history;return console.log(t),r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){n(30),o.push("/")}},"Jogar Novamente"),r.a.createElement("ul",null,t.sort((function(e,t){return t.score-e.score})).map((function(t,a){return e.renderList(t,a)}))))}}]),t}(r.a.Component),_=Object(s.b)(null,(function(e){return{ajusta:function(t){return e(j(t))}}}))(D),F=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(x,e)}}),r.a.createElement(h.b,{path:"/config",exact:!0,render:function(e){return r.a.createElement(b,e)}}),r.a.createElement(h.b,{path:"/jogo",exact:!0,render:function(e){return r.a.createElement(L,e)}}),r.a.createElement(h.b,{path:"/feedback",exact:!0,render:function(e){return r.a.createElement(w,e)}}),r.a.createElement(h.b,{path:"/ranking",exact:!0,render:function(e){return r.a.createElement(_,e)}}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=a(27),K=a(108),G={acertos:0,questions:0},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOTAL":return Object(N.a)({},e,{acertos:t.payload,questions:e.questions+1});default:return e}},U={results:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA_API":return Object(N.a)({},e,{results:[t.payload]});default:return e}},W={timer:30,shouldRemount:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVETEMPO":return Object(N.a)({},e,{timer:t.payload});case"REMOUNT_TIMER":return Object(N.a)({},e,{shouldRemount:t.payload});default:return e}},z=Object(H.c)({reqApiReducer:V,perguntasReducer:Q,timerReducer:$}),X=Object(H.d)(z,Object(H.a)(K.a));c.a.render(r.a.createElement(s.a,{store:X},r.a.createElement(i.a,null,r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[109,1,2]]]);
//# sourceMappingURL=main.544fc4c1.chunk.js.map